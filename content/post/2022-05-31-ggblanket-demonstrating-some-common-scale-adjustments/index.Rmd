---
title: '{ggblanket}: demonstrating some common scale adjustments'
author: "David Hodge"
date: '2022-05-31'
slug: ggblanket-demonstrating-some-common-scale-adjustments
categories: []
tags: R
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE,
  fig.height = 3.5, 
  fig.width = 6
)
```

![](../logo.png){width="20%"}

I was mucking around with some scale adjustments with my {ggblanket} package, and thought I'd share this as a post.

It's by no means a complete demonstration of the functionality available, but it demonstrates a bit of how and x and y scales can be adjusted.

```{r}
library(palmerpenguins)
library(tidyverse)
library(lubridate)
library(ggblanket)
```

Note x scale default limits of min/max breaks and zero expanding

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          theme = gg_theme(y_grid = TRUE))
```

Adjust limits

```{r}
economics %>%
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          theme = gg_theme(y_grid = TRUE))
```

Add expand of 0.05

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE))
```

Make the y axis start at zero

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE)
```

Change the y title

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE, 
          y_title = "Unemployment")
```

Change the y title

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE, 
          y_title = "Unemployment")
```

Remove the x title

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_title = "Unemployment",
          y_zero = TRUE, 
          x_title = "")
```

Alternative way to remove the x title

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE,
          y_title = "Unemployment") +
  ggplot2::labs(x = NULL)
```

Use ggplot2's default breaks, limits, labels and expand

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_line(date, unemploy, 
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE,
          y_title = "Unemployment") +
  ggplot2::labs(x = NULL) +
  scale_x_date()
```

Convert to a column graph

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_col(date, unemploy, 
           x_limits = c(NA_Date_, NA_Date_),
           x_expand = c(0.05, 0.05),
           theme = gg_theme(y_grid = TRUE), 
           y_zero = TRUE,
           y_title = "Unemployment") +
  ggplot2::labs(x = NULL)
```

Convert to a step graph

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_step(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE)
```

Convert to a point graph

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_step(date, unemploy, 
          x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE)
```

Convert to a ribbon to show uncertainty

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_ribbon(date, y = unemploy, ymin = unemploy - 500, ymax = unemploy + 500,           x_limits = c(NA_Date_, NA_Date_),
          x_expand = c(0.05, 0.05),
          theme = gg_theme(y_grid = TRUE), 
          y_zero = TRUE) +
  geom_line()

```

Remove the outer lines

```{r}
economics %>% 
  slice_head(n = 100) %>% 
  gg_ribbon(date, y = unemploy, ymin = unemploy - 500, ymax = unemploy + 500,             x_limits = c(NA_Date_, NA_Date_),
            x_expand = c(0.05, 0.05),
            theme = gg_theme(y_grid = TRUE), 
            y_zero = TRUE,
            pal = scales::alpha(pal_viridis_mix(1), 0)) +
  geom_line(col = scales::alpha(pal_viridis_mix(1), 1))
```

Make a line graph of penguin body mass by year

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species) +
  ggplot2::geom_point()
```

Specify breaks and make the theme only have horizontal gridlines

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species, 
          x_breaks = 2007:2009,
          theme = gg_theme(y_grid = TRUE)
  ) +
  ggplot2::geom_point()
```

Remove comma default transformation

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species, 
          x_breaks = 2007:2009,
          theme = gg_theme(y_grid = TRUE),
          x_labels = ~.x
  ) +
  ggplot2::geom_point()
```

Alternatively, express explicitly the required labels

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species, 
          x_breaks = 2007:2009,
          theme = gg_theme(y_grid = TRUE),
          x_labels = scales::label_number(accuracy = 1, big.mark = "")
  ) +
  ggplot2::geom_point()
```

Add ggblanket theme with only horizontal gridlines

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species, 
          x_breaks = 2007:2009,
          theme = gg_theme(y_grid = TRUE), 
          x_labels = ~.x
  ) +
  ggplot2::geom_point()
```

Add some expansion on the x

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  gg_line(year, body_mass_g, col = species, 
          x_breaks = 2007:2009,
          x_labels = ~.x,
          theme = gg_theme(y_grid = TRUE), 
          x_expand = c(0.05, 0.05)
  ) +
  ggplot2::geom_point()
```

Convert year variable to date class

```{r}
penguins %>% 
  group_by(year, species) %>% 
  summarise(body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  mutate(year = lubridate::ymd(glue::glue("{year}-01-01"))) %>% 
  gg_line(year, body_mass_g, col = species, 
          theme = gg_theme(y_grid = TRUE) 
  ) +
  ggplot2::geom_point()
```

For further information, see the [ggblanket website](https://davidhodge931.github.io/ggblanket/).
